{% extends 'base/base.html' %}
{% load static %}
{% block title %}
<title>Investment | Dashboard</title>
{% endblock title %}

{% block script %}
<script type="module" src="{% static 'main/js/slider.js' %}"></script>
<script type="module" src="{% static 'main/js/marquee.js' %}"></script>
{% endblock script %}

{% block breadcrumb %}
<li class="flex items-center gap-3">
    <span class="text-sm text-red-600 font-medium tracking-wide">Dashboard</span>
    <span class="text-3xl text-gray-400 font-light">|</span>
</li>
{% endblock breadcrumb %}

{% block breadcrumbtitle %}
Dashboard
{% endblock breadcrumbtitle %}

{% block message %}
{% if messages %}
<div class="w-fit bg-white absolute right-8 top-16" data-alert="notification">
    {% for message in messages %}
    <div class="flex">
        <div
            class="bg-{{message.tags}} flex px-3 rounded-l text-xl items-center border-{{message.tags}} border text-white">
            <i class="icon-{{message.tags}}"></i>
        </div>
        <div
            class="border flex gap-3 text-sm tracking-wide font-medium rounded-r border-{{message.tags}} bg-{{message.tags}}_light px-4 py-3 text-{{message.tags}}">
            <span>{{ message }}</span>
            <button data-alert-close="close"
                class="icon-circle-with-cross border-l border-{{message.tags}} pl-3"></button>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endblock message %}

{% block content %}
<div class="space-y-7">
    <!-- <div class="grid grid-cols-12">
        <div class="border col-span-1 text-yellow-600 bg-gray-200 border-r-0 border-gray-400 rounded-l px-5 py-3">
            <div class="flex justify-center items-center gap-2 ">
                <i class="text-xl icon-bell"></i>
            </div>
        </div>
        <div class="col-span-11 items-center flex border bg-gray-100  border-gray-400 rounded-r px-5 py-3">
            <div class="marquee-left-right overflow-hidden flex  text-slate-600 tracking-wide text-base font-medium ">
                <span class="whitespace-nowrap">
                    
                </span>
            </div>
        </div>
    </div> -->
    <div class="lg:grid lg:grid-cols-12 lg:gap-7 space-y-8 lg:space-y-0">
        <div class="lg:col-span-5 flex flex-col space-y-8 rounded py-6 px-8 bg-dep relative overflow-hidden border-gray-400">
            <div class="space-y-1">
                <div
                    class="w-full text-center font-semibold flex justify-center items-center tracking-wide text-yellow-500 text-3xl">
                    <i class="icon-credit text-yellow-500"></i>
                    <span>{{user_data.amount}}</span>
                </div>
                <div class="w-full text-center">
                    <span class="font-semibold tracking-wide text-white text-2xl">Total Balance</span>
                </div>
            </div>
            <div class="space-y-2">
                <div class="text-white justify-between flex text-center px-2 text-base tracking-wide font-medium">
                    <span class="block">Today,s Profit</span>
                    <span class="text-yellow-500 font-bold"><i class="icon-credit"></i>{{user_data.today_profit}}.00</span>
                </div>
                <div class="text-white flex justify-between text-center px-2 text-base tracking-wide font-medium">
                    <span class="block">Yesterday's Profit</span>
                    <span class="text-yellow-500 font-bold"><i class="icon-credit"></i>{{user_data.yesterday_profit}}.00</span>
                </div>
                <div class="text-white flex justify-between text-center px-2 text-base tracking-wide font-medium">
                    <span class="block">Accumulated Profit</span>
                    <span class="text-yellow-500 font-bold"><i class="icon-credit"></i>{{user_data.accumulated_profit}}.00</span>
                </div>
            </div>
            <div class="flex justify-between">
                <div class="flex-auto text-center">
                    <a href="{% url 'deposit' %}" class="bg-gred border-2 m-auto text-white border-red-700 w-14 h-14 shadow rounded-full text-2xl flex items-center justify-center">
                        <i class="icon-wallet"></i>
                    </a>
                    <span class="text-white text-sm tracking-wide font-medium">Deposite</span>
                </div>
                <div class="flex-auto text-center">
                    <a href="{% url 'withdrawl' %}" class="bg-gred border-2 m-auto text-white border-red-700 w-14 h-14 shadow rounded-full text-2xl flex items-center justify-center">
                        <i class="icon-withdrawal"></i>
                    </a>
                    <span class="text-white text-sm tracking-wide font-medium">Withdraw</span>
                </div>
                <div class="flex-auto text-center relative">
                    <a onclick="copyText('{{invite_link}}')" class="bg-gred border-2 m-auto text-white border-red-700 w-14 h-14 shadow rounded-full text-2xl flex items-center justify-center">
                        <i class="icon-add-user"></i>
                    </a>
                    <span class="text-white text-sm tracking-wide font-medium" >Invite</span>
                    <div id="copied" class="border hidden rounded bg-gray-100 shadow absolute z-30 text-center transition-all px-3 right-4 -top-8">Link copied</div>
                </div>
            </div>
        </div>
        <div class="lg:col-span-7 flex flex-col border rounded overflow-hidden border-gray-400">
            <div class="py-3 px-4">
                <span class="font-medium text-slate-700 text-lg ">Historical User Deposits</span>
            </div>
            <div class="border-t p-4 border-gray-400">
                <div class="marquee-top-bottom space-y-2 overflow-hidden h-64">
                    {% for item in payments  %}
                    <div class="lg:col-span-6 space-y-6">
                        <div class="space-y-[2px] border py-2 px-3 rounded bg-gray-100 border-gray-400">
                            <div class="lg:flex items-center justify-between">
                                <div class="flex text-gray-600 gap-1 items-center text-sm font-semibold tracking-wider">
                                    <span> Payment Type : </span>
                                    {% if item.payment_type == 'DEPOSIT' %}
                                        <span class="text-green-600"> {{item.payment_type |title}} </span>
                                    {% else %}
                                        <span class="text-red-600"> {{item.payment_type |title}} </span>
                                    {% endif %}
                                </div>
                                <div class="flex gap-1 font-semibold text-sm text-gray-600 tracking-wider">
                                    <span> Payment Status : </span>
                                    {% if item.payment_status == "pending" %}
                                        <span class="text-yellow-800">
                                            {{item.payment_status |title}}
                                        </span>
                                    {% elif item.payment_status == "success" %}
                                        <span class="text-green-800">
                                            {{item.payment_status |title}}
                                        </span>
                                    {% else %}
                                        <span class="text-red-800">
                                            {{item.payment_status |title}}
                                        </span>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="lg:flex items-center justify-between">
                                <div class="flex">
                                    <div class="flex gap-1 text-gray-600 text-sm font-semibold tracking-wider">
                                        <span> Date : </span>
                                        <span> {{item.created_at |date:"d/m/y"}}</span>
                                    </div>                               
                                </div>
                                <div class="flex">
                                    <div class="flex gap-1 text-sm text-gray-600 font-semibold tracking-wider">
                                        <span> Amount : </span>
                                        <span> {{item.amount}}.00</span>
                                    </div> 
                                </div>
                            </div>                          
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <div class="lg:grid lg:grid-cols-12">
        <div class="lg:col-span-12">
            <div class="border rounded-t py-3 px-4 border-b-0 bg-gray-100 border-gray-400">
                <span class="font-medium text-slate-700 text-lg ">Cooperative Partner </span>
            </div>
            <div class="border lg:grid lg:grid-cols-6 lg:gap-2 py-6 px-4 border-gray-400 rounded-b lg:space-y-0 space-y-3">
                <div class="lg:col-span-1 shadow overflow-hidden p-1 rounded border border-gray-400">
                    <img style="mix-blend-mode: multiply;" src="{% static 'main/image/cop/first.png'%}" />
                </div>
                <div class="lg:col-span-1 shadow overflow-hidden p-1 rounded border border-gray-400">
                    <img style="mix-blend-mode: multiply;" src="{% static 'main/image/cop/flipkart.png'%}" />
                </div>
                <div class="lg:col-span-1 shadow overflow-hidden p-1 rounded border border-gray-400">
                    <img style="mix-blend-mode: multiply;" src="{% static 'main/image/cop/amazon.png'%}" />
                </div>
                <div class="lg:col-span-1 shadow overflow-hidden p-1 rounded border border-gray-400">
                    <img style="mix-blend-mode: multiply;" src="{% static 'main/image/cop/bookmyshow.png'%}" />
                </div>
                <div class="lg:col-span-1 shadow overflow-hidden p-1 rounded border border-gray-400">
                    <img style="mix-blend-mode: multiply;" src="{% static 'main/image/cop/myntra.png'%}" />
                </div>
                <div class="lg:col-span-1 shadow overflow-hidden p-1 rounded border border-gray-400">
                    <img style="mix-blend-mode: multiply;" src="{% static 'main/image/cop/snapdeal.png'%}" />
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function copyText(text) {
        /* Copy text into clipboard */
        const copied = document.getElementById("copied")
        navigator.clipboard.writeText(text);
        copied.classList.remove("hidden")
        setTimeout(() => {
            copied.classList.add("hidden")
        }, 2000)
        
    }
</script>

{% endblock content %}